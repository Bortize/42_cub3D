Primero comprueba que la linea del plano que recibe contenga alguno de los caracteres permitidos a lo largo de la cadena pero sin identificar en que posicion.

En caso afirmativo, entonces ya entrar√≠a a comprobar cada caracter de la linea uno a uno hasta recorrerla entera comprobando si es valido o no para gestionar el error en caso de que no lo sea.
